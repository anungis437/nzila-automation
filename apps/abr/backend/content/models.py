"""
Django models for content app.
Auto-generated by Nzila Code Generator â€” 2026-02-17

DO NOT EDIT manually unless you know what you're doing.
Re-run the generator to overwrite.
"""
import uuid
from django.db import models
from django.contrib.postgres.fields import ArrayField
from django.contrib.postgres.search import SearchVectorField

try:
    from pgvector.django import VectorField
except ImportError:
    VectorField = None  # pgvector not installed


class BaseModel(models.Model):
    """Abstract base with standard audit fields."""
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        abstract = True


class OrganizationModel(BaseModel):
    """Abstract base for multi-organization models."""
    organization = models.ForeignKey(
        'auth_core.Organizations',
        on_delete=models.CASCADE,
        related_name='%(class)ss'
    )

    class Meta:
        abstract = True



class ContentCategories(BaseModel):
    """Migrated from sql: 003_content_tables.sql"""
    name = models.CharField(max_length=255)
    slug = models.CharField(max_length=100, unique=True)
    description = models.TextField(null=True, blank=True)
    icon = models.CharField(max_length=100, null=True, blank=True)
    parent_id = models.UUIDField(null=True, blank=True)
    sort_order = models.IntegerField(null=True, blank=True)

    class Meta:
        db_table = 'content_categories'
        verbose_name = 'ContentCategories'
        ordering = ['-created_at']

    def __str__(self):
        return str(self.name)

class Courses(BaseModel):
    """Migrated from sql: 003_content_tables.sql"""
    REQUIRED_TIER_CHOICES = [('free', 'Free'), ('professional', 'Professional'), ('enterprise', 'Enterprise')]

    slug = models.CharField(max_length=200, unique=True)
    description = models.TextField(null=True, blank=True)
    thumbnail_url = models.TextField(null=True, blank=True)
    cover_image_url = models.TextField(null=True, blank=True)
    tags = models.JSONField(default=dict, null=True, blank=True)
    instructor_id = models.UUIDField(null=True, blank=True)
    estimated_duration_minutes = models.IntegerField(null=True, blank=True)
    is_featured = models.BooleanField(default=False)
    required_tier = models.CharField(choices=REQUIRED_TIER_CHOICES, max_length=50, null=True, blank=True, default='free')
    completion_badge_id = models.UUIDField(null=True, blank=True)
    meta_description = models.TextField(null=True, blank=True)
    completions_count = models.IntegerField(null=True, blank=True)
    average_rating = models.DecimalField(max_digits=3, decimal_places=2, null=True, blank=True)
    total_reviews = models.IntegerField(null=True, blank=True)
    deleted_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'courses'
        verbose_name = 'Courses'
        ordering = ['-created_at']

    def __str__(self):
        return str(self.slug)

class Lessons(BaseModel):
    """Migrated from sql: 003_content_tables.sql"""
    course_id = models.UUIDField(null=True, blank=True)
    slug = models.CharField(max_length=200)
    description = models.TextField(null=True, blank=True)
    content_url = models.TextField(null=True, blank=True)
    article = models.TextField(null=True, blank=True)
    video_provider = models.CharField(max_length=50, null=True, blank=True)
    thumbnail_url = models.TextField(null=True, blank=True)
    estimated_read_time_minutes = models.IntegerField(null=True, blank=True)
    lesson_number = models.IntegerField(null=True, blank=True)
    sort_order = models.IntegerField(null=True, blank=True)
    is_preview = models.BooleanField(default=False)
    deleted_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'lessons'
        verbose_name = 'Lessons'
        constraints = [
            models.UniqueConstraint(fields=['course_id', 'slug'], name='unique_lessons_course_id_slug'),
        ]
        ordering = ['-created_at']

    def __str__(self):
        return str(self.slug)

class Quizzes(BaseModel):
    """Migrated from sql: 003_content_tables.sql"""
    lesson_id = models.UUIDField(null=True, blank=True)
    course_id = models.UUIDField(null=True, blank=True)
    description = models.TextField(null=True, blank=True)
    time_limit_minutes = models.IntegerField(null=True, blank=True)
    max_attempts = models.IntegerField(null=True, blank=True)
    randomize_questions = models.BooleanField(default=False)
    show_correct_answers = models.BooleanField(default=False)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'quizzes'
        verbose_name = 'Quizzes'

class TribunalCases(BaseModel):
    """Migrated from sql: 003_content_tables.sql"""
    LANGUAGE_CHOICES = [('en', 'En'), ('fr', 'Fr')]

    case_title = models.TextField(null=True, blank=True)
    citation = models.CharField(max_length=500, null=True, blank=True)
    tribunal_province = models.CharField(max_length=50, null=True, blank=True)
    decision_date = models.DateField(null=True, blank=True)
    filing_date = models.DateField(null=True, blank=True)
    respondent = models.TextField(null=True, blank=True)
    full_text = models.TextField(null=True, blank=True)
    decision = models.TextField(null=True, blank=True)
    subcategories = models.JSONField(default=dict, null=True, blank=True)
    key_issues = models.JSONField(default=dict, null=True, blank=True)
    remedies = models.JSONField(default=dict, null=True, blank=True)
    outcomes = models.JSONField(default=dict, null=True, blank=True)
    cases_cited = models.JSONField(default=dict, null=True, blank=True)
    ai_key_phrases = models.JSONField(default=dict, null=True, blank=True)
    ai_sentiment = models.CharField(max_length=50, null=True, blank=True)
    pdf_url = models.TextField(null=True, blank=True)
    document_type = models.CharField(max_length=50, null=True, blank=True)
    language = models.CharField(choices=LANGUAGE_CHOICES, max_length=10, null=True, blank=True, default='en')
    tags = models.JSONField(default=dict, null=True, blank=True)
    bookmarks_count = models.IntegerField(null=True, blank=True)
    last_scraped_at = models.DateTimeField(null=True, blank=True)
    scraper_version = models.CharField(max_length=50, null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)
    deleted_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'tribunal_cases'
        verbose_name = 'TribunalCases'

class Enrollments(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(null=True, blank=True)
    course_id = models.UUIDField(null=True, blank=True)
    organization_id = models.UUIDField(null=True, blank=True)
    progress_percentage = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    completion_time_minutes = models.IntegerField(null=True, blank=True)
    certificate_issued_at = models.DateTimeField(null=True, blank=True)
    current_lesson_id = models.UUIDField(null=True, blank=True)
    due_date = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'enrollments'
        verbose_name = 'Enrollments'
        constraints = [
            models.UniqueConstraint(fields=['user_id', 'course_id'], name='unique_enrollments_user_id_course_id'),
        ]
        ordering = ['-created_at']

class LessonProgress(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(null=True, blank=True)
    lesson_id = models.UUIDField(null=True, blank=True)
    course_id = models.UUIDField(null=True, blank=True)
    enrollment_id = models.UUIDField(null=True, blank=True)
    progress_percentage = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    video_watched_duration_seconds = models.IntegerField(null=True, blank=True)
    time_spent_seconds = models.IntegerField(null=True, blank=True)
    last_accessed_at = models.DateTimeField(null=True, blank=True)
    access_count = models.IntegerField(null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'lesson_progress'
        verbose_name = 'LessonProgress'
        constraints = [
            models.UniqueConstraint(fields=['user_id', 'lesson_id'], name='unique_lesson_progress_user_id_lesson_id'),
        ]

class QuizAttempts(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    STATUS_CHOICES = [('in_progress', 'In Progress'), ('completed', 'Completed'), ('abandoned', 'Abandoned')]

    user_id = models.UUIDField(null=True, blank=True)
    quiz_id = models.UUIDField(null=True, blank=True)
    enrollment_id = models.UUIDField(null=True, blank=True)
    status = models.CharField(choices=STATUS_CHOICES, max_length=50, default='in_progress')
    total_questions = models.IntegerField(null=True, blank=True)
    correct_answers = models.IntegerField(null=True, blank=True)
    passed = models.BooleanField(default=False)
    time_spent_seconds = models.IntegerField(null=True, blank=True)
    started_at = models.DateTimeField(null=True, blank=True)
    completed_at = models.DateTimeField(null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'quiz_attempts'
        verbose_name = 'QuizAttempts'

class Achievements(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    slug = models.CharField(max_length=100, unique=True)
    description = models.TextField(null=True, blank=True)
    icon_url = models.TextField(null=True, blank=True)
    badge_image_url = models.TextField(null=True, blank=True)
    category = models.CharField(max_length=100, null=True, blank=True)
    is_active = models.BooleanField(default=False)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'achievements'
        verbose_name = 'Achievements'

    def __str__(self):
        return str(self.slug)

class UserAchievements(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(null=True, blank=True)
    achievement_id = models.UUIDField(null=True, blank=True)
    organization_id = models.UUIDField(null=True, blank=True)
    points_awarded = models.IntegerField(null=True, blank=True)
    created_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'user_achievements'
        verbose_name = 'UserAchievements'
        constraints = [
            models.UniqueConstraint(fields=['user_id', 'achievement_id'], name='unique_user_achievements_user_id_achievement_id'),
        ]
        ordering = ['-created_at']

class UserPoints(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(null=True, blank=True)
    organization_id = models.UUIDField(null=True, blank=True)
    bonus_reason = models.CharField(max_length=255, null=True, blank=True)
    created_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'user_points'
        verbose_name = 'UserPoints'
        ordering = ['-created_at']

class LearningStreaks(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(default=uuid.uuid4, unique=True)
    current_streak_start_date = models.DateField(null=True, blank=True)
    last_activity_date = models.DateField(null=True, blank=True)
    longest_streak_start_date = models.DateField(null=True, blank=True)
    longest_streak_end_date = models.DateField(null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'learning_streaks'
        verbose_name = 'LearningStreaks'

class Bookmarks(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    resource_type = models.CharField(max_length=100, null=True, blank=True)
    user_id = models.UUIDField(null=True, blank=True)
    resource_id = models.UUIDField(null=True, blank=True)
    notes = models.TextField(null=True, blank=True)
    tags = models.JSONField(default=dict, null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'bookmarks'
        verbose_name = 'Bookmarks'
        constraints = [
            models.UniqueConstraint(fields=['user_id', 'resource_type', 'resource_id'], name='unique_bookmarks_user_id_resource_type_resource_id'),
        ]

class CourseReviews(BaseModel):
    """Migrated from sql: 004_user_engagement.sql"""
    user_id = models.UUIDField(null=True, blank=True)
    course_id = models.UUIDField(null=True, blank=True)
    title = models.CharField(max_length=255, null=True, blank=True)
    review_text = models.TextField(null=True, blank=True)
    is_verified_purchase = models.BooleanField(default=False)
    moderated_by = models.UUIDField(null=True, blank=True)
    moderation_notes = models.TextField(null=True, blank=True)
    unhelpful_count = models.IntegerField(null=True, blank=True)
    updated_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'course_reviews'
        verbose_name = 'CourseReviews'
        constraints = [
            models.UniqueConstraint(fields=['user_id', 'course_id'], name='unique_course_reviews_user_id_course_id'),
        ]

    def __str__(self):
        return str(self.title)

class Testimonials(BaseModel):
    """Migrated from sql: 013_testimonials.sql"""
    role = models.CharField(max_length=100)
    organization = models.CharField(max_length=150)
    content = models.TextField(null=True, blank=True)
    rating = models.IntegerField(null=True, blank=True)
    active = models.BooleanField(default=False)
    display_order = models.IntegerField(null=True, blank=True)
    linkedin_url = models.TextField(null=True, blank=True)
    case_study_url = models.TextField(null=True, blank=True)

    class Meta:
        db_table = 'testimonials'
        verbose_name = 'Testimonials'
        ordering = ['-created_at']