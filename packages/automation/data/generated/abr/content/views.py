"""
DRF viewsets for content app.
Auto-generated by Nzila Code Generator â€” 2026-02-17
"""
from rest_framework import viewsets, permissions, filters
from django_filters.rest_framework import DjangoFilterBackend
from .models import (ContentCategories, Courses, Lessons, Quizzes, TribunalCases, Enrollments, LessonProgress, QuizAttempts, Achievements, UserAchievements, UserPoints, LearningStreaks, Bookmarks, CourseReviews, Testimonials)
from .serializers import (ContentCategoriesSerializer, CoursesSerializer, LessonsSerializer, QuizzesSerializer, TribunalCasesSerializer, EnrollmentsSerializer, LessonProgressSerializer, QuizAttemptsSerializer, AchievementsSerializer, UserAchievementsSerializer, UserPointsSerializer, LearningStreaksSerializer, BookmarksSerializer, CourseReviewsSerializer, TestimonialsSerializer)


class ContentCategoriesViewSet(viewsets.ModelViewSet):
    """API endpoint for ContentCategories operations."""
    queryset = ContentCategories.objects.all()
    serializer_class = ContentCategoriesSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['name', 'slug', 'icon']
    search_fields = ['name', 'slug', 'description', 'icon']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class CoursesViewSet(viewsets.ModelViewSet):
    """API endpoint for Courses operations."""
    queryset = Courses.objects.all()
    serializer_class = CoursesSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['slug', 'is_featured', 'required_tier']
    search_fields = ['slug', 'description', 'thumbnail_url', 'cover_image_url', 'required_tier']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class LessonsViewSet(viewsets.ModelViewSet):
    """API endpoint for Lessons operations."""
    queryset = Lessons.objects.all()
    serializer_class = LessonsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['slug', 'video_provider', 'is_preview']
    search_fields = ['slug', 'description', 'content_url', 'article', 'video_provider']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class QuizzesViewSet(viewsets.ModelViewSet):
    """API endpoint for Quizzes operations."""
    queryset = Quizzes.objects.all()
    serializer_class = QuizzesSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['randomize_questions', 'show_correct_answers']
    search_fields = ['description']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class TribunalCasesViewSet(viewsets.ModelViewSet):
    """API endpoint for TribunalCases operations."""
    queryset = TribunalCases.objects.all()
    serializer_class = TribunalCasesSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['citation', 'tribunal_province', 'ai_sentiment', 'document_type', 'language', 'scraper_version']
    search_fields = ['case_title', 'citation', 'tribunal_province', 'respondent', 'full_text']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class EnrollmentsViewSet(viewsets.ModelViewSet):
    """API endpoint for Enrollments operations."""
    queryset = Enrollments.objects.all()
    serializer_class = EnrollmentsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class LessonProgressViewSet(viewsets.ModelViewSet):
    """API endpoint for LessonProgress operations."""
    queryset = LessonProgress.objects.all()
    serializer_class = LessonProgressSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class QuizAttemptsViewSet(viewsets.ModelViewSet):
    """API endpoint for QuizAttempts operations."""
    queryset = QuizAttempts.objects.all()
    serializer_class = QuizAttemptsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['status', 'passed']
    search_fields = ['status']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class AchievementsViewSet(viewsets.ModelViewSet):
    """API endpoint for Achievements operations."""
    queryset = Achievements.objects.all()
    serializer_class = AchievementsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['slug', 'category', 'is_active']
    search_fields = ['slug', 'description', 'icon_url', 'badge_image_url', 'category']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class UserAchievementsViewSet(viewsets.ModelViewSet):
    """API endpoint for UserAchievements operations."""
    queryset = UserAchievements.objects.all()
    serializer_class = UserAchievementsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class UserPointsViewSet(viewsets.ModelViewSet):
    """API endpoint for UserPoints operations."""
    queryset = UserPoints.objects.all()
    serializer_class = UserPointsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['bonus_reason']
    search_fields = ['bonus_reason']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class LearningStreaksViewSet(viewsets.ModelViewSet):
    """API endpoint for LearningStreaks operations."""
    queryset = LearningStreaks.objects.all()
    serializer_class = LearningStreaksSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class BookmarksViewSet(viewsets.ModelViewSet):
    """API endpoint for Bookmarks operations."""
    queryset = Bookmarks.objects.all()
    serializer_class = BookmarksSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    search_fields = ['notes']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class CourseReviewsViewSet(viewsets.ModelViewSet):
    """API endpoint for CourseReviews operations."""
    queryset = CourseReviews.objects.all()
    serializer_class = CourseReviewsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['title', 'is_verified_purchase']
    search_fields = ['title', 'review_text', 'moderation_notes']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']


class TestimonialsViewSet(viewsets.ModelViewSet):
    """API endpoint for Testimonials operations."""
    queryset = Testimonials.objects.all()
    serializer_class = TestimonialsSerializer
    permission_classes = [permissions.IsAuthenticated]
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['role', 'organization', 'active']
    search_fields = ['role', 'organization', 'content', 'linkedin_url', 'case_study_url']
    ordering_fields = ['created_at', 'updated_at']
    ordering = ['-created_at']
